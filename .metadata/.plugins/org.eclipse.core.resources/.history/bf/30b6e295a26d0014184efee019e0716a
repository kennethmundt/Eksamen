package dataAccess;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.swing.table.DefaultTableModel;

import application.Customer;
import application.Animal;

public class ReadCustomerDb
{
    Connection conn = null;
    PreparedStatement prepareStatement = null;
    ResultSet result = null;

    ConnectionDb dBc = new ConnectionDb();

    ArrayList<Customer> customerList;

    public ArrayList<Customer> readCustomer()
    {
	customerList = new ArrayList<Customer>();

	try
	{
	    connect();
	    prepareStatement = conn.prepareStatement("SELECT * FROM kunde");
	    result = prepareStatement.executeQuery();

	    while (result.next())
	    {
		String id = result.getString("idkunde");
		String name = result.getString("navn");
		String address = result.getString("adresse");
		String mobil = result.getString("mobil");
		String mail = result.getString("email");

		customerList.add(new Customer(id, name, address, mobil, mail));
	    }
	}

	catch (SQLException e)
	{
	    System.err.println(e);
	}

	finally
	{
	    if (conn != null)
	    {
		try
		{
		    conn.close();
		} catch (SQLException e)
		{
		    e.printStackTrace();
		}
	    }
	}
	return customerList;
    }

//    public void updateCustomerDb(String idNum, String newData, int row, int column)
    public void updateCustomerDb(String value1, String value2, String value3, String value4, int row)
    {
	connect();
	try
	{
	    prepareStatement = conn.prepareStatement("UPDATE kunde SET navn = ?, adresse = ?, mobil = ?, email = ? WHERE idkunde = " + row);
//	    prepareStatement.setString(row, newData);
	    prepareStatement.setString(1, value1);
	    prepareStatement.setString(2, value2);
	    prepareStatement.setString(3, value3);
	    prepareStatement.setString(4, value4);
	    prepareStatement.executeUpdate();
	    
	} catch (SQLException e)
	{
	    e.printStackTrace();
	}
    }
    
    public void connect()
    {
	conn = dBc.getConnection();
    }
    
}






//try
//{
//
//	preparedStatement.setString(1, (String) customerTable.getValueAt(row, 1));
//	preparedStatement.setString(2, (String) customerTable.getValueAt(row, 2));
//	preparedStatement.setString(3, (String) customerTable.getValueAt(row, 3));
//	preparedStatement.setString(4, (String) customerTable.getValueAt(row, 4));
//
//	preparedStatement.executeUpdate();
//	preparedStatement.close();
//	connection.close();
//
//} catch (Exception ex)
//{
//	ex.printStackTrace();
//}